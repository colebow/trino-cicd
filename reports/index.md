Trino CI/CD reports
===================

# Runs queue time per week
```
 run_conclusion |          week           | min_queue_duration | max_queue_duration | avg_queue_duration |                        queue_percentiles                         | min_run_duration | max_run_duration | avg_run_duration |                         run_percentiles                          
----------------+-------------------------+--------------------+--------------------+--------------------+------------------------------------------------------------------+------------------+------------------+------------------+------------------------------------------------------------------
 success        | 2021-11-08 00:00:00.000 | 0 00:00:07.000     | 7 17:15:31.000     | 0 04:16:47.545     | [0 00:00:09.000, 0 00:00:10.000, 0 00:02:00.490, 0 00:45:25.000] | 0 01:07:43.000   | 0 05:21:11.000   | 0 01:31:43.485   | [0 01:17:05.875, 0 01:23:42.667, 0 01:37:51.980, 0 01:54:55.000] 
 success        | 2021-11-15 00:00:00.000 | 0 00:00:07.000     | 2 12:13:23.000     | 0 00:48:36.858     | [0 00:00:09.880, 0 00:00:12.592, 0 00:13:08.025, 0 00:58:00.125] | 0 01:05:14.000   | 0 16:04:30.000   | 0 01:41:51.173   | [0 01:18:14.720, 0 01:26:34.939, 0 01:38:55.671, 0 01:53:37.675] 
 success        | 2021-11-22 00:00:00.000 | 0 00:00:07.000     | 0 04:20:56.000     | 0 00:44:00.466     | [0 00:00:10.023, 0 00:07:05.250, 0 01:10:55.796, 0 02:20:15.600] | 0 00:37:02.000   | 0 02:13:25.000   | 0 01:30:25.406   | [0 01:17:22.159, 0 01:24:05.719, 0 01:45:44.981, 0 02:02:34.525] 
 success        | 2021-11-29 00:00:00.000 | 0 00:00:07.000     | 0 03:23:17.000     | 0 00:41:03.813     | [0 00:00:58.569, 0 00:26:52.753, 0 01:09:39.600, 0 01:49:59.333] | 0 01:09:12.000   | 0 08:37:37.000   | 0 01:37:59.968   | [0 01:21:03.835, 0 01:27:27.963, 0 01:44:39.378, 0 02:01:51.667] 
 success        | 2021-12-06 00:00:00.000 | 0 00:00:08.000     | 0 05:30:43.000     | 0 01:45:32.245     | [0 00:26:02.027, 0 01:24:52.925, 0 03:01:33.741, 0 03:48:11.680] | 0 00:26:21.000   | 0 03:14:21.000   | 0 01:30:22.560   | [0 01:18:55.522, 0 01:26:11.900, 0 01:42:31.830, 0 01:54:35.293] 
 success        | 2021-12-13 00:00:00.000 | 0 00:00:03.000     | 0 03:55:32.000     | 0 00:34:14.880     | [0 00:00:10.000, 0 00:04:27.653, 0 00:42:42.532, 0 01:58:28.250] | 0 00:37:44.000   | 0 05:24:38.000   | 0 01:38:28.265   | [0 01:15:41.750, 0 01:24:07.735, 0 01:45:12.202, 0 02:07:54.425] 
 success        | 2021-12-20 00:00:00.000 | 0 00:00:07.000     | 0 01:34:49.000     | 0 00:23:54.625     | [0 00:00:10.000, 0 00:13:52.125, 0 00:40:30.433, 0 01:09:59.000] | 0 00:45:14.000   | 0 06:22:26.000   | 0 01:55:53.875   | [0 01:23:28.500, 0 01:42:43.563, 0 02:10:54.789, 0 02:59:55.000] 
 success        | 2021-12-27 00:00:00.000 | 0 00:00:06.000     | 0 00:42:51.000     | 0 00:04:09.045     | [0 00:00:09.000, 0 00:00:10.000, 0 00:00:46.000, 0 00:18:27.000] | 0 01:07:27.000   | 0 02:11:10.000   | 0 01:27:00.227   | [0 01:14:14.000, 0 01:19:33.000, 0 01:40:10.000, 0 01:59:21.000] 
 success        | 2022-01-03 00:00:00.000 | 0 00:00:07.000     | 2 04:02:33.000     | 0 01:25:19.893     | [0 00:00:10.000, 0 00:00:11.467, 0 00:04:23.320, 0 01:00:55.000] | 0 00:12:37.000   | 0 02:42:00.000   | 0 01:26:29.071   | [0 01:15:09.000, 0 01:21:17.933, 0 01:37:04.660, 0 01:55:40.000] 
 success        | 2022-01-10 00:00:00.000 | 0 00:00:06.000     | 0 08:26:08.000     | 0 01:15:59.271     | [0 00:05:16.444, 0 00:46:49.969, 0 01:59:55.680, 0 03:18:03.400] | 0 00:22:09.000   | 1 17:40:01.000   | 0 02:49:48.331   | [0 01:27:06.222, 0 01:51:21.133, 0 02:56:03.968, 0 04:13:48.300] 
 success        | 2022-01-17 00:00:00.000 | 0 00:00:08.000     | 0 04:47:30.000     | 0 01:42:35.521     | [0 00:07:54.375, 0 01:20:28.667, 0 03:16:57.900, 0 03:52:06.000] | 0 00:06:17.000   | 0 06:26:46.000   | 0 01:35:01.775   | [0 01:16:39.188, 0 01:29:22.000, 0 01:46:06.440, 0 01:52:50.000] 
 success        | 2022-01-24 00:00:00.000 | 0 00:00:08.000     | 0 03:43:01.000     | 0 00:39:42.522     | [0 00:00:11.000, 0 00:10:25.889, 0 00:59:25.120, 0 02:06:57.000] | 0 00:08:57.000   | 0 03:01:55.000   | 0 01:18:27.955   | [0 01:13:14.875, 0 01:24:10.333, 0 01:35:32.940, 0 01:49:21.000] 
(12 rows)
```
[query](https://github.com/nineinchnick/trino-cicd/blob/aacad0315c55858286daf44478bff6aaad4fce49/sql/runs-queue-time-per-week.sql)

# Flaky test ratio per week/run
```
 year_week | flaky_ratio_percent |                          name                          | success_count | failure_count |   run_id   |       created_at        
-----------+---------------------+--------------------------------------------------------+---------------+---------------+------------+-------------------------
 2021:45   |                50.0 | test (:trino-tests)                                    |             1 |             1 | 1438239899 | 2021-11-09 06:29:15.000 
 2021:46   |                50.0 | test (:trino-tests)                                    |             1 |             1 | 1470994553 | 2021-11-17 09:56:27.000 
 2021:46   |               33.33 | test (:trino-raptor-legacy)                            |             2 |             1 | 1463990002 | 2021-11-15 20:32:33.000 
 2021:48   |                50.0 | pt (hdp3, suite-2, 17)                                 |             1 |             1 | 1542264475 | 2021-12-05 22:06:25.000 
 2021:48   |                50.0 | test (:trino-phoenix,:trino-phoenix5)                  |             1 |             1 | 1533586340 | 2021-12-03 02:59:45.000 
 2021:48   |                50.0 | test (:trino-sqlserver,:trino-postgresql,:trino-mysql) |             1 |             1 | 1542264475 | 2021-12-05 22:06:25.000 
 2021:48   |                50.0 | test (:trino-tests)                                    |             1 |             1 | 1542127963 | 2021-12-05 20:47:51.000 
 2021:48   |                50.0 | test-other-modules                                     |             1 |             1 | 1531338640 | 2021-12-02 15:48:04.000 
 2021:48   |                50.0 | test-other-modules                                     |             1 |             1 | 1542127963 | 2021-12-05 20:47:51.000 
 2021:49   |                50.0 | test (:trino-tests)                                    |             1 |             1 | 1551702008 | 2021-12-07 23:30:43.000 
 2021:49   |                50.0 | test (:trino-tests)                                    |             1 |             1 | 1553412392 | 2021-12-08 09:41:24.000 
 2021:50   |                50.0 | pt (default, suite-compatibility, 11)                  |             1 |             1 | 1583896242 | 2021-12-15 17:31:13.000 
 2021:50   |                50.0 | test (:trino-hive -P test-failure-recovery)            |             1 |             1 | 1571669527 | 2021-12-13 06:46:31.000 
 2021:50   |                50.0 | test (:trino-hive,:trino-orc)                          |             1 |             1 | 1597071585 | 2021-12-18 22:51:51.000 
 2021:50   |                50.0 | test-jdbc-compatibility                                |             1 |             1 | 1583896242 | 2021-12-15 17:31:13.000 
 2021:50   |                50.0 | test-other-modules                                     |             1 |             1 | 1583896242 | 2021-12-15 17:31:13.000 
 2021:51   |                50.0 | test-other-modules                                     |             1 |             1 | 1612749962 | 2021-12-22 19:24:05.000 
 2021:51   |               41.67 | test (:trino-hive -P test-failure-recovery)            |             7 |             5 | 1608337805 | 2021-12-21 19:23:45.000 
 2021:51   |               40.91 | test (:trino-hive -P test-failure-recovery)            |            13 |             9 | 1608492250 | 2021-12-21 20:10:57.000 
 2021:51   |               33.33 | pt (default, suite-oauth2, 11)                         |             2 |             1 | 1616520422 | 2021-12-23 17:37:51.000 
 2021:51   |               33.33 | test (:trino-clickhouse)                               |             2 |             1 | 1616520422 | 2021-12-23 17:37:51.000 
 2021:51   |               13.64 | test (:trino-hive -P test-failure-recovery)            |            19 |             3 | 1608949966 | 2021-12-21 22:37:18.000 
 2021:51   |                9.09 | test (:trino-hive -P test-failure-recovery)            |            20 |             2 | 1612183121 | 2021-12-22 16:32:21.000 
 2021:51   |                8.45 | test (:trino-hive -P test-failure-recovery)            |            65 |             6 | 1615618706 | 2021-12-23 12:53:13.000 
 2021:51   |                4.59 | test (:trino-hive -P test-failure-recovery)            |           104 |             5 | 1615556748 | 2021-12-23 12:31:55.000 
 2021:52   |               21.43 | test (:trino-hive -P test-failure-recovery)            |            11 |             3 | 1640971782 | 2021-12-31 14:23:10.000 
 2022:01   |                50.0 | test (:trino-hive,:trino-orc)                          |             1 |             1 | 1662937209 | 2022-01-06 12:14:06.000 
 2022:02   |                50.0 | test (:trino-phoenix,:trino-phoenix5)                  |             1 |             1 | 1684362985 | 2022-01-11 20:00:59.000 
 2022:02   |                50.0 | test (:trino-phoenix,:trino-phoenix5)                  |             1 |             1 | 1687903661 | 2022-01-12 13:53:17.000 
 2022:02   |                50.0 | test-docs (:trino-resource-group-managers)             |             1 |             1 | 1697683572 | 2022-01-14 12:34:46.000 
 2022:02   |                50.0 | test-docs (:trino-tests)                               |             1 |             1 | 1697683572 | 2022-01-14 12:34:46.000 
 2022:02   |               33.33 | test (:trino-hive -P test-failure-recovery)            |             2 |             1 | 1682702551 | 2022-01-11 13:31:56.000 
 2022:02   |               33.33 | test (:trino-phoenix,:trino-phoenix5)                  |             2 |             1 | 1682702551 | 2022-01-11 13:31:56.000 
 2022:02   |               33.33 | test (:trino-sqlserver,:trino-postgresql,:trino-mysql) |             2 |             1 | 1682702551 | 2022-01-11 13:31:56.000 
 2022:03   |                50.0 | maven-checks (17)                                      |             1 |             1 | 1712767799 | 2022-01-18 12:47:22.000 
 2022:03   |                50.0 | test (:trino-clickhouse, 0)                            |             1 |             1 | 1722101623 | 2022-01-20 07:09:18.000 
 2022:03   |                50.0 | test (:trino-clickhouse, 3)                            |             1 |             1 | 1722101623 | 2022-01-20 07:09:18.000 
 2022:03   |                50.0 | test (:trino-clickhouse, 5)                            |             1 |             1 | 1722101623 | 2022-01-20 07:09:18.000 
 2022:03   |                50.0 | test (:trino-main)                                     |             1 |             1 | 1712767799 | 2022-01-18 12:47:22.000 
(39 rows)
```
[query](https://github.com/nineinchnick/trino-cicd/blob/aacad0315c55858286daf44478bff6aaad4fce49/sql/flaky-test-ratio.sql)

